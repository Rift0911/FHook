# jitpack.yml —— 不要设置 env.PATH
jdk:
  - openjdk17

env:
  ANDROID_SDK_ROOT: /home/jitpack/android-sdk
  ANDROID_HOME: /home/jitpack/android-sdk

install:
  # 1) 安装新版 cmdline-tools（带新版 sdkmanager，兼容 JDK 17）
  - mkdir -p $ANDROID_SDK_ROOT
  - curl -sSL https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip -o cmdtools.zip
  - unzip -q cmdtools.zip -d $ANDROID_SDK_ROOT/cmdline-tools
  - mv $ANDROID_SDK_ROOT/cmdline-tools/cmdline-tools $ANDROID_SDK_ROOT/cmdline-tools/latest

  # 2) 用“我们安装的”sdkmanager 安装与你工程一致的组件（36 / 36.0.0 / 3.22.1 / 29.0.13113456）
  - yes | $ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager --sdk_root=$ANDROID_SDK_ROOT \
    "platforms;android-36" "build-tools;36.0.0" "platform-tools" \
    "cmake;3.22.1" "ndk;29.0.13113456"
